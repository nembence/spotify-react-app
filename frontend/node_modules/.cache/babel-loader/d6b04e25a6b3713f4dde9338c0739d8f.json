{"ast":null,"code":"import { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport token from \"./token\";\n\nconst useFetch = url => {\n  const [status, setStatus] = useState(\"\");\n  const [fetchedData, setData] = useState([]);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    setStatus(\"loading\");\n    token.getToken().then(data => {\n      fetchData(data);\n    });\n  }, [url]);\n\n  const fetchData = data => {\n    axios.get(url, {\n      headers: {\n        Authorization: \"Bearer \" + data\n      }\n    }).then(response => {\n      setData(response.data.albums.items);\n      setStatus(\"loaded\");\n    }).catch(error => {\n      console.log(error.response.status);\n      setStatus(\"error\");\n      setError(error.response.data);\n    });\n  };\n\n  return [status, error, fetchedData];\n};\n\nexport default useFetch;","map":{"version":3,"sources":["/home/mag/Documents/codecool/advanced/spotify-react-app/src/utilities/useFetch.js"],"names":["useState","useEffect","axios","token","useFetch","url","status","setStatus","fetchedData","setData","error","setError","getToken","then","data","fetchData","get","headers","Authorization","response","albums","items","catch","console","log"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,SAAlB;;AAEA,MAAMC,QAAQ,GAAIC,GAAD,IAAS;AACtB,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBP,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAACQ,WAAD,EAAcC,OAAd,IAAyBT,QAAQ,CAAC,EAAD,CAAvC;AACA,QAAM,CAACU,KAAD,EAAQC,QAAR,IAAoBX,QAAQ,CAAC,IAAD,CAAlC;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACZM,IAAAA,SAAS,CAAC,SAAD,CAAT;AACAJ,IAAAA,KAAK,CAACS,QAAN,GAAiBC,IAAjB,CAAuBC,IAAD,IAAU;AAC5BC,MAAAA,SAAS,CAACD,IAAD,CAAT;AACH,KAFD;AAGH,GALQ,EAKN,CAACT,GAAD,CALM,CAAT;;AAOA,QAAMU,SAAS,GAAID,IAAD,IAAU;AACxBZ,IAAAA,KAAK,CACAc,GADL,CACSX,GADT,EACc;AACNY,MAAAA,OAAO,EAAE;AACLC,QAAAA,aAAa,EAAE,YAAYJ;AADtB;AADH,KADd,EAMKD,IANL,CAMWM,QAAD,IAAc;AAChBV,MAAAA,OAAO,CAACU,QAAQ,CAACL,IAAT,CAAcM,MAAd,CAAqBC,KAAtB,CAAP;AACAd,MAAAA,SAAS,CAAC,QAAD,CAAT;AACH,KATL,EAUKe,KAVL,CAUYZ,KAAD,IAAW;AACda,MAAAA,OAAO,CAACC,GAAR,CAAYd,KAAK,CAACS,QAAN,CAAeb,MAA3B;AACAC,MAAAA,SAAS,CAAC,OAAD,CAAT;AACAI,MAAAA,QAAQ,CAACD,KAAK,CAACS,QAAN,CAAeL,IAAhB,CAAR;AACH,KAdL;AAeH,GAhBD;;AAkBA,SAAO,CAACR,MAAD,EAASI,KAAT,EAAgBF,WAAhB,CAAP;AACH,CA/BD;;AAiCA,eAAeJ,QAAf","sourcesContent":["import { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport token from \"./token\";\n\nconst useFetch = (url) => {\n    const [status, setStatus] = useState(\"\");\n    const [fetchedData, setData] = useState([]);\n    const [error, setError] = useState(null);\n\n    useEffect(() => {\n        setStatus(\"loading\");\n        token.getToken().then((data) => {\n            fetchData(data);\n        });\n    }, [url]);\n\n    const fetchData = (data) => {\n        axios\n            .get(url, {\n                headers: {\n                    Authorization: \"Bearer \" + data,\n                },\n            })\n            .then((response) => {\n                setData(response.data.albums.items);\n                setStatus(\"loaded\");\n            })\n            .catch((error) => {\n                console.log(error.response.status);\n                setStatus(\"error\");\n                setError(error.response.data);\n            });\n    };\n\n    return [status, error, fetchedData];\n};\n\nexport default useFetch;\n"]},"metadata":{},"sourceType":"module"}